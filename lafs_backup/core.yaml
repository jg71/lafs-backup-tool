### Default (baseline) configuration parameters.
### DO NOT ever change this config, use -c commandline option instead!


source:
  # Path or glob pattern (to match path) to backup, required
  path: # example: /srv/backups/weekly.*
  # Path to intermediate backup queue-file (list of paths to upload)
  queue: # example: /srv/backups/queue.txt
  # Path to persistent db of remote directory nodes, required
  entry_cache: # example: /srv/backups/dentries.db

  pick_policy: alphasort_last


destination:
  # URL of Tahoe-LAFS node webapi
  url: http://localhost:3456/uri


http:
  request_pool_options:
    maxPersistentPerHost: 10
    cachedConnectionTimeout: 600
    retryAutomatically: true
  ca_certs_files: /etc/ssl/certs/ca-certificates.crt # can be a list
  debug_requests: false # insecure! logs will contain tahoe caps


filter:
  # Either tuples like "[action ('+' or '-'), regexp]" or just exclude-patterns (python
  #  regexps) to match relative (to source.path, starting with "/") paths to backup.
  # Patterns are matched against each path in order they're listed here.
  # Leaf directories are matched with the trailing slash
  #  (as with rsync) to be distinguishable from files with the same name.
  # If path doesn't match any regexp on the list, it will be included.
  #
  # Examples:
  #  - ['+', '/\.git/config$']   # backup git repository config files
  #  - '/\.git/'   # *don't* backup any repository objects
  #  - ['-', '/\.git/']   # exactly same thing as above (redundant)
  #  - '/(?i)\.?svn(/.*|ignore)$' # exclude (case-insensitive) svn (or .svn) paths and ignore-lists

  # - '/(CVS|RCS|SCCS|_darcs|\{arch\})/$'
  # - '/\.(git|hg|bzr|svn|cvs)(/|ignore|attributes|tags)?$'
  # - '/=(RELEASE-ID|meta-update|update)$'


debug:
  queue_only: false # only generate upload queue file, don't upload anything
  reuse_queue: false # don't generate upload queue file, use existing one as-is
  disable_deduplication: false # make no effort to de-duplicate data (should still work on tahoe-level for files)


logging: # see http://docs.python.org/library/logging.config.html
  # "custom" level means WARNING/DEBUG/NOISE, depending on CLI options
  warnings: true # capture python warnings
  version: 1
  formatters:
    basic:
      format: '%(asctime)s :: %(name)s :: %(levelname)s: %(message)s'
      datefmt: '%Y-%m-%d %H:%M:%S'
  handlers:
    console:
      class: logging.StreamHandler
      stream: ext://sys.stderr
      formatter: basic
      level: custom
    # file:
    #   class: logging.handlers.WatchedFileHandler
    #   filename: /var/log/harvestd.log
    #   formatter: basic
    #   encoding: utf-8
    #   level: DEBUG
  # loggers:
  #   twisted:
  #     handlers: [console]
  #     level: 0
  root:
    level: custom
    handlers: [console]
